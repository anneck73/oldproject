# 0.2.3->0.2.4-Try-1
CREATE TABLE legal_file (id INT AUTO_INCREMENT NOT NULL, created_by_id INT DEFAULT NULL, updated_by_id INT DEFAULT NULL, deleted_by_id INT DEFAULT NULL, legal_type VARCHAR(255) NOT NULL, mimeType VARCHAR(255) NOT NULL, file_name VARCHAR(255) NOT NULL, file_meta LONGTEXT NOT NULL COMMENT '(DC2Type:json_array)', hash VARCHAR(255) NOT NULL, created_at DATETIME DEFAULT NULL, updated_at DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_A1E4D8A7D1B862B8 (hash), INDEX IDX_A1E4D8A7B03A8386 (created_by_id), INDEX IDX_A1E4D8A7896DBBDE (updated_by_id), INDEX IDX_A1E4D8A7C76F1F52 (deleted_by_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE meal_part (id INT AUTO_INCREMENT NOT NULL, created_by_id INT DEFAULT NULL, updated_by_id INT DEFAULT NULL, deleted_by_id INT DEFAULT NULL, name VARCHAR(25) NOT NULL, description TEXT NOT NULL, hash VARCHAR(255) NOT NULL, created_at DATETIME DEFAULT NULL, updated_at DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_53D1A332D1B862B8 (hash), INDEX IDX_53D1A332B03A8386 (created_by_id), INDEX IDX_53D1A332896DBBDE (updated_by_id), INDEX IDX_53D1A332C76F1F52 (deleted_by_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE meal_offer (id INT AUTO_INCREMENT NOT NULL, created_by_id INT DEFAULT NULL, updated_by_id INT DEFAULT NULL, deleted_by_id INT DEFAULT NULL, name VARCHAR(25) NOT NULL, description TEXT NOT NULL, price DOUBLE PRECISION NOT NULL, available_amount INT NOT NULL, hash VARCHAR(255) NOT NULL, created_at DATETIME DEFAULT NULL, updated_at DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_931C6FE8D1B862B8 (hash), INDEX IDX_931C6FE8B03A8386 (created_by_id), INDEX IDX_931C6FE8896DBBDE (updated_by_id), INDEX IDX_931C6FE8C76F1F52 (deleted_by_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE base_meal_to_meal_event (base_meal_id INT NOT NULL, meal_event_id INT NOT NULL, INDEX IDX_5C1DDBC45790DFB2 (base_meal_id), INDEX IDX_5C1DDBC415E5F3F9 (meal_event_id), PRIMARY KEY(base_meal_id, meal_event_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE meal_event (id INT AUTO_INCREMENT NOT NULL, start_date_time DATETIME NOT NULL, end_date_time DATETIME NOT NULL, timezone VARCHAR(25) NOT NULL, all_day TINYINT(1) NOT NULL, reoccuring TINYINT(1) NOT NULL, rrule VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE home_meal_to_meal_part (home_meal_id INT NOT NULL, meal_part_id INT NOT NULL, INDEX IDX_9A76DC2FD6B6AD8E (home_meal_id), INDEX IDX_9A76DC2F3550F9F5 (meal_part_id), PRIMARY KEY(home_meal_id, meal_part_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE pro_meal_to_meal_offer (pro_meal_id INT NOT NULL, meal_offer_id INT NOT NULL, INDEX IDX_8450899963FA00D (pro_meal_id), INDEX IDX_845089937D46F9C (meal_offer_id), PRIMARY KEY(pro_meal_id, meal_offer_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE calendar (id INT AUTO_INCREMENT NOT NULL, hash VARCHAR(255) NOT NULL, created_at DATETIME DEFAULT NULL, updated_at DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_6EA9A146D1B862B8 (hash), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE legal_file ADD CONSTRAINT FK_A1E4D8A7B03A8386 FOREIGN KEY (created_by_id) REFERENCES mm_user (id) ON DELETE SET NULL;
ALTER TABLE legal_file ADD CONSTRAINT FK_A1E4D8A7896DBBDE FOREIGN KEY (updated_by_id) REFERENCES mm_user (id) ON DELETE SET NULL;
ALTER TABLE legal_file ADD CONSTRAINT FK_A1E4D8A7C76F1F52 FOREIGN KEY (deleted_by_id) REFERENCES mm_user (id) ON DELETE SET NULL;
ALTER TABLE meal_part ADD CONSTRAINT FK_53D1A332B03A8386 FOREIGN KEY (created_by_id) REFERENCES mm_user (id) ON DELETE SET NULL;
ALTER TABLE meal_part ADD CONSTRAINT FK_53D1A332896DBBDE FOREIGN KEY (updated_by_id) REFERENCES mm_user (id) ON DELETE SET NULL;
ALTER TABLE meal_part ADD CONSTRAINT FK_53D1A332C76F1F52 FOREIGN KEY (deleted_by_id) REFERENCES mm_user (id) ON DELETE SET NULL;
ALTER TABLE meal_offer ADD CONSTRAINT FK_931C6FE8B03A8386 FOREIGN KEY (created_by_id) REFERENCES mm_user (id) ON DELETE SET NULL;
ALTER TABLE meal_offer ADD CONSTRAINT FK_931C6FE8896DBBDE FOREIGN KEY (updated_by_id) REFERENCES mm_user (id) ON DELETE SET NULL;
ALTER TABLE meal_offer ADD CONSTRAINT FK_931C6FE8C76F1F52 FOREIGN KEY (deleted_by_id) REFERENCES mm_user (id) ON DELETE SET NULL;
ALTER TABLE base_meal_to_meal_event ADD CONSTRAINT FK_5C1DDBC45790DFB2 FOREIGN KEY (base_meal_id) REFERENCES base_meal (id);
ALTER TABLE base_meal_to_meal_event ADD CONSTRAINT FK_5C1DDBC415E5F3F9 FOREIGN KEY (meal_event_id) REFERENCES meal_event (id);
ALTER TABLE home_meal_to_meal_part ADD CONSTRAINT FK_9A76DC2FD6B6AD8E FOREIGN KEY (home_meal_id) REFERENCES home_meal (id);
ALTER TABLE home_meal_to_meal_part ADD CONSTRAINT FK_9A76DC2F3550F9F5 FOREIGN KEY (meal_part_id) REFERENCES meal_part (id);
ALTER TABLE pro_meal_to_meal_offer ADD CONSTRAINT FK_8450899963FA00D FOREIGN KEY (pro_meal_id) REFERENCES pro_meal (id);
ALTER TABLE pro_meal_to_meal_offer ADD CONSTRAINT FK_845089937D46F9C FOREIGN KEY (meal_offer_id) REFERENCES meal_offer (id);
